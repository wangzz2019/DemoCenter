<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <!-- <script type="module">
    import { datadogRum } from '@datadog/browser-rum';

    datadogRum.init({
      applicationId: '57c4cd92-3641-4a08-bf87-c61896cf5504',
      clientToken: 'pub7d5e515739b4f0ce532aee02186a84fb',
      site: 'datadoghq.com',
      service: 'reactspa',
      // Specify a version number to identify the deployed version of your application in Datadog 
      // version: '1.0.0',
      sampleRate: 100,
      trackInteractions: true
    });
  </script> -->
  <!--
    <script src="javascripts/app.js"></script>
    

  <script src="javascripts/sendlogs.js"></script>
  <script src="https://www.datadoghq-browser-agent.com/datadog-rum-us.js" type="text/javascript"></script>
  <script type="text/javascript" src="https://www.datadoghq-browser-agent.com/datadog-logs-us.js"></script>

  <script>
    window.DD_RUM && window.DD_RUM.init({
      clientToken: 'pub0b77543cbbc57fb420ab7819a36666b5',
      applicationId: 'ffdc1bb8-de18-4a4c-bb63-c913aa8f0439',
    });
  </script>
  <script>
    window.DD_LOGS && DD_LOGS.init({
      clientToken: 'pub0b77543cbbc57fb420ab7819a36666b5',
      forwardErrorsToLogs: true,
      sampleRate: 100,
      service: "Democenter",
      env: "test"
    });
  </script>
</head>
-->

<body>
  <div class="content">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <H1>
            <a class="navbar-brand">Hey, This is the home page built by Express</a>
          </H1>
        </div>
      </div>
    </nav>

    <main class="container">
      <!-- home view -->
      <div id="home-view">
        <h4></h4>
      </div>
      <button id="btn-sendlog" class="btn btn-primary btn-margin container" onClick="sendlogs()">
        <font size="4">Send Log</font>
      </button>
    </main>

  </div>
  <script type="text/javascript">
    function getCurrentYMD() {
      var now = new Date(Date.now() + ((new Date().getTimezoneOffset() + (9 * 60)) * 60 * 1000));
      //数字の2桁表記関数
      function padZero(num) {
        return (num < 10 ? "0" : "") + num;
      }
      var YMD = now.getFullYear() + 15 + "-" + padZero(now.getMonth() + 5) + "-" + padZero(now.getDate())　//YYYY-MM-DD
      return YMD;
    }
    document.getElementById("home-view").innerHTML = getCurrentYMD();
    var info = "abcd"
    //alert(info == "0000" || "0001");
    document.getElementById("home-view").innerHTML = (info == "0300" || "0020");
  </script>
  <div id="testdiv" style="height:100px;width:200px;overflow-y:auto;background:#EEEEEE;">
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnop<br>
    abcdefghijklmnot<br>
  </div>
  <button id="testbtn" class="btn btn-primary btn-margin container">
    <font size="4">test button</font>
  </button>
  <script type="text/javascript">
    testbtn.disabled = true;
  </script>
  <script type="text/javascript">
    var addEvent = (function () {
      if (window.addEventListener) {
        return function (elm, type, handle) {
          elm.addEventListener(type, handle, false);
        }
      }
      if (window.attachEvent) {
        return function (elm, type, handle) {
          elm.attachEvent('on' + type, handle);
        }
      }
    })();

    var div = document.getElementById('testdiv');
    addEvent(div, 'scroll', function () {
      var scrollHeight = div.scrollHeight;
      var scrollTop = div.scrollTop;
      var height = div.offsetHeight;
      if ((scrollTop + height) == scrollHeight) {
        console.log('it is bottom');
        testbtn.disabled=false;
      }
      else{
        testbtn.disabled=true;
      }
    });
  </script>
</body>

</html>